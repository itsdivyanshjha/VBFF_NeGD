# =================================================================
# Voice Form Assistant - Docker Compose CPU Override
# =================================================================
# Use this for CPU-only deployment (no GPU required)
# 
# Usage:
#   docker-compose -f docker-compose.yml -f docker-compose.cpu.yml up -d
# =================================================================

version: '3.8'

services:
  backend:
    build:
      context: ./backend
      dockerfile: Dockerfile.cpu
    environment:
      # Override GPU settings for CPU
      - ML_DEVICE=cpu
      - WHISPER_DEVICE=cpu
      - WHISPER_MODEL=base  # Smaller model for CPU
    
    # Remove GPU deployment constraints
    deploy:
      resources:
        limits:
          cpus: '4'
          memory: 8G
